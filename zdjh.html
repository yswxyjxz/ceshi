<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026阅读计划制定 | 严肃文学研究小组</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* 基础重置 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        html, body {
            width: 100%;
            overflow-x: hidden;
            position: relative;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2038 0%, #2a3048 100%);
            color: #f0f0f0;
            line-height: 1.6;
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* 主容器 */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* 返回按钮 */
        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 100;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }
        
        .back-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(-3px);
        }
        
        /* 英雄区域 */
        .hero-section {
            min-height: 60vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 60px 20px 40px;
            position: relative;
        }
        
        .year-badge {
            font-size: 1rem;
            font-weight: 600;
            letter-spacing: 3px;
            text-transform: uppercase;
            color: #ff7b7b;
            margin-bottom: 25px;
            position: relative;
            display: inline-block;
        }
        
        .year-badge::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 2px;
            background: #ff7b7b;
        }
        
        .hero-title {
            font-size: clamp(2.8rem, 6vw, 4.5rem);
            font-weight: 800;
            line-height: 1.05;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #fff 20%, #ff9a9a 80%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 1px;
            text-shadow: 0 5px 15px rgba(255, 154, 154, 0.2);
        }
        
        .hero-subtitle {
            font-size: clamp(1.1rem, 2vw, 1.4rem);
            color: #ddd;
            max-width: 700px;
            margin: 0 auto 30px;
            font-weight: 300;
        }
        
        /* 毛玻璃效果卡片 */
        .glass-card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            padding: 25px;
            transition: all 0.3s ease;
        }
        
        .glass-card:hover {
            transform: translateY(-5px);
            border-color: rgba(255, 123, 123, 0.3);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
        }
        
        /* 内容区域 */
        .content-section {
            margin: 40px 0;
        }
        
        .section-header {
            margin-bottom: 25px;
        }
        
        .section-title {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title i {
            color: #ff9a9a;
        }
        
        .section-subtitle {
            color: #bbb;
            font-size: 1rem;
        }
        
        /* 两列布局 */
        .two-column-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        @media (max-width: 968px) {
            .two-column-layout {
                grid-template-columns: 1fr;
            }
        }
        
        /* 计划制定区域 */
        .plan-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #ddd;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .form-input {
            width: 100%;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            color: #fff;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #ff7b7b;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .form-select {
            width: 100%;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            color: #fff;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .form-select:focus {
            outline: none;
            border-color: #ff7b7b;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .form-select option {
            background: #2a3048;
            color: #fff;
        }
        
        .goal-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 10px;
        }
        
        .goal-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 15px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .goal-option:hover {
            border-color: rgba(255, 123, 123, 0.3);
            transform: translateY(-3px);
        }
        
        .goal-option.selected {
            border-color: #ff7b7b;
            background: rgba(255, 123, 123, 0.1);
        }
        
        .goal-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: #ff9a9a;
            margin-bottom: 5px;
        }
        
        .goal-label {
            font-size: 0.85rem;
            color: #bbb;
        }
        
        /* 书单推荐区域 */
        .book-recommendations {
            max-height: 500px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .book-recommendations::-webkit-scrollbar {
            width: 6px;
        }
        
        .book-recommendations::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }
        
        .book-recommendations::-webkit-scrollbar-thumb {
            background: rgba(255, 123, 123, 0.5);
            border-radius: 3px;
        }
        
        .book-recommendations::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 123, 123, 0.7);
        }
        
        .book-category {
            margin-bottom: 25px;
        }
        
        .category-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #ff9a9a;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .book-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .book-item:hover {
            background: rgba(255, 255, 255, 0.08);
        }
        
        .book-item.selected {
            background: rgba(255, 123, 123, 0.1);
            border: 1px solid rgba(255, 123, 123, 0.3);
        }
        
        .book-checkbox {
            width: 18px;
            height: 18px;
            accent-color: #ff7b7b;
            margin-top: 3px;
            cursor: pointer;
        }
        
        .book-info {
            flex-grow: 1;
        }
        
        .book-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 3px;
        }
        
        .book-author {
            font-size: 0.85rem;
            color: #bbb;
        }
        
        .book-tag {
            display: inline-block;
            font-size: 0.75rem;
            padding: 2px 8px;
            background: rgba(255, 123, 123, 0.15);
            color: #ff9a9a;
            border-radius: 20px;
            margin-top: 5px;
        }
        
        /* 自定义书单区域 */
        .custom-books {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-height: 300px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .custom-book-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        .remove-book {
            background: transparent;
            border: none;
            color: #ff7b7b;
            font-size: 1rem;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .remove-book:hover {
            background: rgba(255, 123, 123, 0.1);
        }
        
        .add-custom-book {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .add-custom-book input {
            flex-grow: 1;
        }
        
        /* 计划预览卡片 */
        .plan-preview {
            position: sticky;
            top: 20px;
            margin-top: 30px;
        }
        
        .plan-card {
            background: linear-gradient(135deg, #2a3048 0%, #1a2038 100%);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .plan-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #ff7b7b, #ff5252);
        }
        
        .plan-header {
            text-align: center;
            margin-bottom: 25px;
        }
        
        .plan-year {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(45deg, #fff 20%, #ff9a9a 80%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 5px;
        }
        
        .plan-subtitle {
            font-size: 1.2rem;
            color: #ddd;
            font-weight: 300;
        }
        
        .plan-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .detail-item {
            text-align: center;
        }
        
        .detail-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #ff9a9a;
            margin-bottom: 5px;
        }
        
        .detail-label {
            font-size: 0.9rem;
            color: #bbb;
        }
        
        .plan-books {
            margin-top: 20px;
        }
        
        .plan-books-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #fff;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .plan-book-list {
            max-height: 200px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .plan-book-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .plan-book-item:last-child {
            border-bottom: none;
        }
        
        .plan-book-number {
            font-size: 0.9rem;
            color: #ff9a9a;
            font-weight: 600;
            width: 25px;
        }
        
        .plan-book-title {
            font-size: 0.95rem;
            flex-grow: 1;
        }
        
        .plan-footer {
            text-align: center;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #bbb;
            font-size: 0.9rem;
        }
        
        /* 按钮样式 */
        .btn-container {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .primary-btn {
            background: linear-gradient(45deg, #ff7b7b, #ff5252);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 12px 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(255, 123, 123, 0.3);
        }
        
        .primary-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(255, 123, 123, 0.4);
        }
        
        .secondary-btn {
            background: transparent;
            color: #ff9a9a;
            border: 1px solid rgba(255, 123, 123, 0.3);
            border-radius: 50px;
            padding: 12px 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }
        
        .secondary-btn:hover {
            background: rgba(255, 123, 123, 0.1);
            border-color: #ff7b7b;
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .container {
                padding: 0 15px;
            }
            
            .hero-title {
                font-size: 2.5rem;
            }
            
            .hero-subtitle {
                font-size: 1rem;
            }
            
            .section-title {
                font-size: 1.6rem;
            }
            
            .goal-options {
                grid-template-columns: 1fr;
            }
            
            .plan-details {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .back-btn {
                top: 15px;
                left: 15px;
                width: 45px;
                height: 45px;
            }
            
            .btn-container {
                flex-direction: column;
            }
            
            .primary-btn, .secondary-btn {
                width: 100%;
                justify-content: center;
            }
        }
        
        @media (max-width: 480px) {
            .hero-title {
                font-size: 2rem;
            }
            
            .plan-card {
                padding: 20px;
            }
            
            .plan-year {
                font-size: 2rem;
            }
        }
        
        /* 提示信息 */
        .hint {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #bbb;
            font-size: 0.9rem;
            margin-top: 10px;
        }
        
        .hint i {
            color: #ff9a9a;
        }
        
        /* 模态框 */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(26, 32, 56, 0.95);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .modal.active {
            display: flex;
            opacity: 1;
        }
        
        .modal-content {
            background: rgba(42, 48, 72, 0.95);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 20px;
            width: 100%;
            max-width: 500px;
            padding: 30px 25px;
            position: relative;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: modalAppear 0.4s ease;
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: transparent;
            border: none;
            color: #aaa;
            font-size: 1.8rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }
        
        .modal-close:hover {
            color: #ff7b7b;
            background: rgba(255, 255, 255, 0.05);
        }
        
        .modal-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: #fff;
        }
        
        @keyframes modalAppear {
            from {
                transform: scale(0.9);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <!-- 返回按钮 -->
    <a href="yuandan.html" class="back-btn">
        <i class="fas fa-arrow-left"></i>
    </a>
    
    <div class="container">
        <!-- 英雄区域 -->
        <section class="hero-section">
            <div class="year-badge">2026阅读计划</div>
            <h1 class="hero-title">制定你的年度书单</h1>
            <p class="hero-subtitle">选择推荐书单或自定义你的专属阅读计划，生成精美卡片保存分享</p>
        </section>
        
        <!-- 主要内容区域 -->
        <div class="two-column-layout">
            <!-- 左侧：计划制定 -->
            <div class="content-section">
                <div class="glass-card">
                    <div class="section-header">
                        <h2 class="section-title"><i class="fas fa-pencil-alt"></i> 制定阅读计划</h2>
                        <p class="section-subtitle">设定你的2026年阅读目标</p>
                    </div>
                    
                    <div class="plan-form">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-user"></i>
                                计划名称
                            </label>
                            <input type="text" class="form-input" id="planName" placeholder="例如：我的2026经典文学之旅" value="我的2026阅读计划">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-bullseye"></i>
                                年度阅读目标
                            </label>
                            <div class="goal-options">
                                <div class="goal-option" data-goal="6">
                                    <div class="goal-number">6</div>
                                    <div class="goal-label">本书</div>
                                </div>
                                <div class="goal-option selected" data-goal="12">
                                    <div class="goal-number">12</div>
                                    <div class="goal-label">本书</div>
                                </div>
                                <div class="goal-option" data-goal="24">
                                    <div class="goal-number">24</div>
                                    <div class="goal-label">本书</div>
                                </div>
                                <div class="goal-option" data-goal="36">
                                    <div class="goal-number">36</div>
                                    <div class="goal-label">本书</div>
                                </div>
                            </div>
                            <div class="hint">
                                <i class="fas fa-info-circle"></i>
                                推荐目标：12本书（每月一本）
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-book-open"></i>
                                阅读类型偏好
                            </label>
                            <select class="form-select" id="readingPreference">
                                <option value="classic">经典文学</option>
                                <option value="modern">现代文学</option>
                                <option value="mix">混合类型</option>
                                <option value="philosophy">哲学思想</option>
                                <option value="history">历史传记</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-calendar-alt"></i>
                                计划开始月份
                            </label>
                            <select class="form-select" id="startMonth">
                                <option value="1">一月</option>
                                <option value="2">二月</option>
                                <option value="3">三月</option>
                                <option value="4">四月</option>
                                <option value="5">五月</option>
                                <option value="6">六月</option>
                                <option value="7">七月</option>
                                <option value="8">八月</option>
                                <option value="9">九月</option>
                                <option value="10">十月</option>
                                <option value="11">十一月</option>
                                <option value="12">十二月</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- 书单推荐区域 -->
                <div class="content-section">
                    <div class="glass-card">
                        <div class="section-header">
                            <h2 class="section-title"><i class="fas fa-bookmark"></i> 推荐书单</h2>
                            <p class="section-subtitle">从我们的推荐书单中选择书籍</p>
                        </div>
                        
                        <div class="book-recommendations" id="bookRecommendations">
                            <!-- 书单内容将通过JavaScript动态生成 -->
                        </div>
                        
                        <div class="btn-container" style="margin-top: 20px;">
                            <button class="secondary-btn" id="selectAllBtn">
                                <i class="fas fa-check-double"></i>
                                全选推荐
                            </button>
                            <button class="secondary-btn" id="clearSelectionBtn">
                                <i class="fas fa-times"></i>
                                清除选择
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 右侧：自定义书单和预览 -->
            <div class="content-section">
                <!-- 自定义书单区域 -->
                <div class="glass-card">
                    <div class="section-header">
                        <h2 class="section-title"><i class="fas fa-edit"></i> 自定义书单</h2>
                        <p class="section-subtitle">添加你自己的书籍</p>
                    </div>
                    
                    <div class="custom-books" id="customBooksList">
                        <!-- 自定义书籍列表将通过JavaScript动态生成 -->
                    </div>
                    
                    <div class="add-custom-book">
                        <input type="text" class="form-input" id="customBookTitle" placeholder="输入书名">
                        <button class="primary-btn" id="addCustomBookBtn" style="padding: 12px 20px;">
                            <i class="fas fa-plus"></i>
                            添加
                        </button>
                    </div>
                    
                    <div class="hint">
                        <i class="fas fa-lightbulb"></i>
                        提示：输入书名后按回车或点击"添加"按钮
                    </div>
                </div>
                
                <!-- 计划预览卡片 -->
                <div class="plan-preview">
                    <div class="glass-card">
                        <div class="section-header">
                            <h2 class="section-title"><i class="fas fa-eye"></i> 计划预览</h2>
                            <p class="section-subtitle">你的2026阅读计划卡片</p>
                        </div>
                        
                        <div class="plan-card" id="planCard">
                            <div class="plan-header">
                                <div class="plan-year">2026</div>
                                <div class="plan-subtitle" id="planCardName">我的2026阅读计划</div>
                            </div>
                            
                            <div class="plan-details">
                                <div class="detail-item">
                                    <div class="detail-value" id="planCardGoal">12</div>
                                    <div class="detail-label">目标书籍</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-value" id="planCardSelected">0</div>
                                    <div class="detail-label">已选书籍</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-value" id="planCardType">经典文学</div>
                                    <div class="detail-label">阅读类型</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-value" id="planCardMonth">一月</div>
                                    <div class="detail-label">开始月份</div>
                                </div>
                            </div>
                            
                            <div class="plan-books">
                                <div class="plan-books-title">阅读书单</div>
                                <div class="plan-book-list" id="planCardBooks">
                                    <!-- 计划书单将通过JavaScript动态生成 -->
                                </div>
                            </div>
                            
                            <div class="plan-footer">
                                <i class="fas fa-quote-left"></i>
                                阅读是一座随身携带的避难所
                                <i class="fas fa-quote-right"></i>
                            </div>
                        </div>
                        
                        <div class="btn-container" style="margin-top: 25px;">
                            <button class="primary-btn" id="savePlanBtn">
                                <i class="fas fa-save"></i>
                                保存计划
                            </button>
                            <button class="secondary-btn" id="screenshotBtn">
                                <i class="fas fa-camera"></i>
                                截图保存
                            </button>
                        </div>
                        
                        <div class="hint">
                            <i class="fas fa-mobile-alt"></i>
                            提示：在移动设备上，长按卡片即可保存图片
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 成功模态框 -->
    <div class="modal" id="successModal">
        <div class="modal-content">
            <button class="modal-close" id="closeSuccessModal">&times;</button>
            <div style="text-align: center; padding: 20px 0;">
                <div style="font-size: 5rem; color: #4caf50; margin-bottom: 20px;">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h2 class="modal-title">计划保存成功！</h2>
                <p style="color: #ddd; margin-bottom: 30px;">你的2026阅读计划已保存，现在可以截图分享给你的朋友了。</p>
                
                <div class="btn-container" style="justify-content: center;">
                    <button class="primary-btn" id="sharePlanBtn">
                        <i class="fas fa-share-alt"></i>
                        分享到社群
                    </button>
                    <button class="secondary-btn" id="newPlanBtn">
                        <i class="fas fa-plus"></i>
                        创建新计划
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 引入html2canvas库用于截图 -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    
    <script>
        // 数据模型
        let readingPlan = {
            name: "我的2026阅读计划",
            goal: 12,
            preference: "classic",
            startMonth: "1",
            selectedBooks: [], // 选中的推荐书籍ID
            customBooks: [] // 自定义书籍
        };

        // 推荐书单数据
        const bookRecommendations = {
            classic: [
                { id: 1, title: "《百年孤独》", author: "加西亚·马尔克斯", tag: "魔幻现实主义" },
                { id: 2, title: "《战争与和平》", author: "列夫·托尔斯泰", tag: "史诗巨著" },
                { id: 3, title: "《红楼梦》", author: "曹雪芹", tag: "中国古典" },
                { id: 4, title: "《1984》", author: "乔治·奥威尔", tag: "反乌托邦" },
                { id: 5, title: "《悲惨世界》", author: "维克多·雨果", tag: "社会史诗" },
                { id: 6, title: "《老人与海》", author: "欧内斯特·海明威", tag: "美国文学" },
                { id: 7, title: "《傲慢与偏见》", author: "简·奥斯汀", tag: "爱情小说" },
                { id: 8, title: "《麦田里的守望者》", author: "J.D.塞林格", tag: "成长小说" }
            ],
            modern: [
                { id: 9, title: "《活着》", author: "余华", tag: "中国当代" },
                { id: 10, title: "《追风筝的人》", author: "卡勒德·胡赛尼", tag: "成长救赎" },
                { id: 11, title: "《挪威的森林》", author: "村上春树", tag: "日本文学" },
                { id: 12, title: "《白夜行》", author: "东野圭吾", tag: "悬疑推理" },
                { id: 13, title: "《平凡的世界》", author: "路遥", tag: "中国当代" },
                { id: 14, title: "《小王子》", author: "安托万·德·圣-埃克苏佩里", tag: "寓言" },
                { id: 15, title: "《霍乱时期的爱情》", author: "加西亚·马尔克斯", tag: "爱情小说" },
                { id: 16, title: "《围城》", author: "钱钟书", tag: "讽刺文学" }
            ],
            philosophy: [
                { id: 17, title: "《理想国》", author: "柏拉图", tag: "哲学经典" },
                { id: 18, title: "《查拉图斯特拉如是说》", author: "尼采", tag: "哲学" },
                { id: 19, title: "《存在与时间》", author: "海德格尔", tag: "存在主义" },
                { id: 20, title: "《沉思录》", author: "马可·奥勒留", tag: "斯多葛哲学" },
                { id: 21, title: "《道德经》", author: "老子", tag: "道家经典" },
                { id: 22, title: "《中国哲学简史》", author: "冯友兰", tag: "中国哲学" },
                { id: 23, title: "《苏菲的世界》", author: "乔斯坦·贾德", tag: "哲学入门" },
                { id: 24, title: "《西方哲学史》", author: "伯特兰·罗素", tag: "哲学史" }
            ],
            history: [
                { id: 25, title: "《史记》", author: "司马迁", tag: "中国历史" },
                { id: 26, title: "《人类简史》", author: "尤瓦尔·赫拉利", tag: "宏观历史" },
                { id: 27, title: "《明朝那些事儿》", author: "当年明月", tag: "通俗历史" },
                { id: 28, title: "《罗马人的故事》", author: "盐野七生", tag: "罗马史" },
                { id: 29, title: "《万历十五年》", author: "黄仁宇", tag: "历史研究" },
                { id: 30, title: "《全球通史》", author: "斯塔夫里阿诺斯", tag: "世界历史" },
                { id: 31, title: "《曾国藩传》", author: "张宏杰", tag: "人物传记" },
                { id: 32, title: "《枪炮、病菌与钢铁》", author: "贾雷德·戴蒙德", tag: "人类历史" }
            ],
            mix: [] // 混合类型将随机从各类中选择
        };

        // DOM元素
        const planNameInput = document.getElementById('planName');
        const goalOptions = document.querySelectorAll('.goal-option');
        const readingPreferenceSelect = document.getElementById('readingPreference');
        const startMonthSelect = document.getElementById('startMonth');
        const bookRecommendationsContainer = document.getElementById('bookRecommendations');
        const customBooksList = document.getElementById('customBooksList');
        const customBookTitleInput = document.getElementById('customBookTitle');
        const addCustomBookBtn = document.getElementById('addCustomBookBtn');
        const selectAllBtn = document.getElementById('selectAllBtn');
        const clearSelectionBtn = document.getElementById('clearSelectionBtn');
        const savePlanBtn = document.getElementById('savePlanBtn');
        const screenshotBtn = document.getElementById('screenshotBtn');
        const successModal = document.getElementById('successModal');
        const planCard = document.getElementById('planCard');
        
        // 计划卡片元素
        const planCardName = document.getElementById('planCardName');
        const planCardGoal = document.getElementById('planCardGoal');
        const planCardSelected = document.getElementById('planCardSelected');
        const planCardType = document.getElementById('planCardType');
        const planCardMonth = document.getElementById('planCardMonth');
        const planCardBooks = document.getElementById('planCardBooks');

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            loadPlanData();
            renderBookRecommendations();
            renderCustomBooks();
            updatePlanCard();
            initEventListeners();
            
            // 初始化混合书单（从各类中随机选择8本）
            initializeMixedBooks();
        });
        
        // 初始化混合书单
        function initializeMixedBooks() {
            const allBooks = [];
            for (const category in bookRecommendations) {
                if (category !== 'mix') {
                    allBooks.push(...bookRecommendations[category]);
                }
            }
            
            // 随机选择8本书
            const mixedBooks = [];
            const usedIndices = new Set();
            while (mixedBooks.length < 8 && mixedBooks.length < allBooks.length) {
                const randomIndex = Math.floor(Math.random() * allBooks.length);
                if (!usedIndices.has(randomIndex)) {
                    mixedBooks.push(allBooks[randomIndex]);
                    usedIndices.add(randomIndex);
                }
            }
            
            bookRecommendations.mix = mixedBooks;
        }
        
        // 从localStorage加载数据
        function loadPlanData() {
            const savedData = localStorage.getItem('readingPlan2026');
            if (savedData) {
                readingPlan = JSON.parse(savedData);
                
                // 更新表单
                planNameInput.value = readingPlan.name;
                readingPreferenceSelect.value = readingPlan.preference;
                startMonthSelect.value = readingPlan.startMonth;
                
                // 更新目标选择
                goalOptions.forEach(option => {
                    option.classList.remove('selected');
                    if (parseInt(option.getAttribute('data-goal')) === readingPlan.goal) {
                        option.classList.add('selected');
                    }
                });
            }
        }
        
        // 保存数据到localStorage
        function savePlanData() {
            localStorage.setItem('readingPlan2026', JSON.stringify(readingPlan));
        }
        
        // 渲染推荐书单
        function renderBookRecommendations() {
            const preference = readingPlan.preference;
            const books = bookRecommendations[preference];
            
            bookRecommendationsContainer.innerHTML = '';
            
            if (preference === 'mix') {
                // 混合类型：按类别分组显示
                const categories = ['classic', 'modern', 'philosophy', 'history'];
                categories.forEach(category => {
                    const categoryBooks = bookRecommendations[category];
                    if (categoryBooks.length > 0) {
                        const categoryTitle = getCategoryName(category);
                        renderBookCategory(categoryTitle, categoryBooks);
                    }
                });
            } else {
                // 单一类型：直接显示
                const categoryTitle = getCategoryName(preference);
                renderBookCategory(categoryTitle, books);
            }
            
            // 为复选框添加事件监听
            document.querySelectorAll('.book-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const bookId = parseInt(this.getAttribute('data-id'));
                    const bookItem = this.closest('.book-item');
                    
                    if (this.checked) {
                        if (!readingPlan.selectedBooks.includes(bookId)) {
                            readingPlan.selectedBooks.push(bookId);
                        }
                        bookItem.classList.add('selected');
                    } else {
                        readingPlan.selectedBooks = readingPlan.selectedBooks.filter(id => id !== bookId);
                        bookItem.classList.remove('selected');
                    }
                    
                    updatePlanCard();
                    savePlanData();
                });
            });
            
            // 初始化选中状态
            updateBookSelectionState();
        }
        
        // 渲染书单类别
        function renderBookCategory(categoryTitle, books) {
            const categoryDiv = document.createElement('div');
            categoryDiv.className = 'book-category';
            categoryDiv.innerHTML = `<div class="category-title">${categoryTitle}</div>`;
            
            books.forEach(book => {
                const bookItem = document.createElement('div');
                bookItem.className = 'book-item';
                bookItem.innerHTML = `
                    <input type="checkbox" class="book-checkbox" data-id="${book.id}">
                    <div class="book-info">
                        <div class="book-title">${book.title}</div>
                        <div class="book-author">${book.author}</div>
                        <div class="book-tag">${book.tag}</div>
                    </div>
                `;
                categoryDiv.appendChild(bookItem);
            });
            
            bookRecommendationsContainer.appendChild(categoryDiv);
        }
        
        // 获取类别名称
        function getCategoryName(categoryKey) {
            const categoryNames = {
                classic: "经典文学",
                modern: "现代文学",
                philosophy: "哲学思想",
                history: "历史传记",
                mix: "混合书单"
            };
            return categoryNames[categoryKey] || categoryKey;
        }
        
        // 更新书籍选中状态
        function updateBookSelectionState() {
            document.querySelectorAll('.book-checkbox').forEach(checkbox => {
                const bookId = parseInt(checkbox.getAttribute('data-id'));
                const bookItem = checkbox.closest('.book-item');
                
                if (readingPlan.selectedBooks.includes(bookId)) {
                    checkbox.checked = true;
                    bookItem.classList.add('selected');
                } else {
                    checkbox.checked = false;
                    bookItem.classList.remove('selected');
                }
            });
        }
        
        // 渲染自定义书籍
        function renderCustomBooks() {
            customBooksList.innerHTML = '';
            
            if (readingPlan.customBooks.length === 0) {
                customBooksList.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: #bbb;">
                        <i class="fas fa-book" style="font-size: 2rem; margin-bottom: 10px; opacity: 0.5;"></i>
                        <p>还没有添加自定义书籍</p>
                    </div>
                `;
                return;
            }
            
            readingPlan.customBooks.forEach((book, index) => {
                const bookItem = document.createElement('div');
                bookItem.className = 'custom-book-item';
                bookItem.innerHTML = `
                    <div style="flex-grow: 1;">
                        <div style="font-weight: 500;">${book.title}</div>
                        ${book.author ? `<div style="font-size: 0.85rem; color: #bbb;">${book.author}</div>` : ''}
                    </div>
                    <button class="remove-book" data-index="${index}">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                customBooksList.appendChild(bookItem);
            });
            
            // 为删除按钮添加事件监听
            document.querySelectorAll('.remove-book').forEach(button => {
                button.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    readingPlan.customBooks.splice(index, 1);
                    savePlanData();
                    renderCustomBooks();
                    updatePlanCard();
                });
            });
        }
        
        // 更新计划卡片
        function updatePlanCard() {
            // 获取所有选中的书籍（包括推荐和自定义）
            const allSelectedBooks = [];
            
            // 添加选中的推荐书籍
            const preference = readingPlan.preference;
            let allBooks = [];
            if (preference === 'mix') {
                // 混合类型：从所有类别中收集
                const categories = ['classic', 'modern', 'philosophy', 'history'];
                categories.forEach(category => {
                    allBooks = allBooks.concat(bookRecommendations[category]);
                });
            } else {
                allBooks = bookRecommendations[preference];
            }
            
            readingPlan.selectedBooks.forEach(bookId => {
                const book = allBooks.find(b => b.id === bookId);
                if (book) {
                    allSelectedBooks.push(book);
                }
            });
            
            // 添加自定义书籍
            readingPlan.customBooks.forEach(book => {
                allSelectedBooks.push({
                    title: book.title,
                    author: book.author || "未知作者"
                });
            });
            
            // 更新卡片数据
            planCardName.textContent = readingPlan.name;
            planCardGoal.textContent = readingPlan.goal;
            planCardSelected.textContent = allSelectedBooks.length;
            planCardType.textContent = getCategoryName(readingPlan.preference);
            planCardMonth.textContent = getMonthName(readingPlan.startMonth);
            
            // 更新书籍列表
            planCardBooks.innerHTML = '';
            const maxBooksToShow = 8; // 最多显示8本书
            const booksToShow = allSelectedBooks.slice(0, maxBooksToShow);
            
            booksToShow.forEach((book, index) => {
                const bookItem = document.createElement('div');
                bookItem.className = 'plan-book-item';
                bookItem.innerHTML = `
                    <div class="plan-book-number">${index + 1}</div>
                    <div class="plan-book-title">${book.title}</div>
                `;
                planCardBooks.appendChild(bookItem);
            });
            
            // 如果还有更多书籍，显示提示
            if (allSelectedBooks.length > maxBooksToShow) {
                const moreItem = document.createElement('div');
                moreItem.className = 'plan-book-item';
                moreItem.innerHTML = `
                    <div class="plan-book-number">...</div>
                    <div class="plan-book-title">还有 ${allSelectedBooks.length - maxBooksToShow} 本书</div>
                `;
                planCardBooks.appendChild(moreItem);
            }
            
            // 如果没有书籍，显示提示
            if (allSelectedBooks.length === 0) {
                planCardBooks.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: #bbb;">
                        <i class="fas fa-book-open" style="opacity: 0.5;"></i>
                        <div style="margin-top: 10px;">尚未选择书籍</div>
                    </div>
                `;
            }
            
            savePlanData();
        }
        
        // 获取月份名称
        function getMonthName(monthNumber) {
            const months = [
                '一月', '二月', '三月', '四月', '五月', '六月',
                '七月', '八月', '九月', '十月', '十一月', '十二月'
            ];
            return months[parseInt(monthNumber) - 1] || '一月';
        }
        
        // 事件监听器初始化
        function initEventListeners() {
            // 计划名称输入
            planNameInput.addEventListener('input', function() {
                readingPlan.name = this.value;
                updatePlanCard();
            });
            
            // 目标选择
            goalOptions.forEach(option => {
                option.addEventListener('click', function() {
                    goalOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    readingPlan.goal = parseInt(this.getAttribute('data-goal'));
                    updatePlanCard();
                });
            });
            
            // 阅读偏好选择
            readingPreferenceSelect.addEventListener('change', function() {
                readingPlan.preference = this.value;
                renderBookRecommendations();
                updatePlanCard();
            });
            
            // 开始月份选择
            startMonthSelect.addEventListener('change', function() {
                readingPlan.startMonth = this.value;
                updatePlanCard();
            });
            
            // 全选按钮
            selectAllBtn.addEventListener('click', function() {
                const preference = readingPlan.preference;
                let allBooks = [];
                
                if (preference === 'mix') {
                    // 混合类型：从所有类别中收集
                    const categories = ['classic', 'modern', 'philosophy', 'history'];
                    categories.forEach(category => {
                        allBooks = allBooks.concat(bookRecommendations[category]);
                    });
                } else {
                    allBooks = bookRecommendations[preference];
                }
                
                readingPlan.selectedBooks = allBooks.map(book => book.id);
                updateBookSelectionState();
                updatePlanCard();
                savePlanData();
                
                showToast(`已全选 ${allBooks.length} 本书`);
            });
            
            // 清除选择按钮
            clearSelectionBtn.addEventListener('click', function() {
                readingPlan.selectedBooks = [];
                updateBookSelectionState();
                updatePlanCard();
                savePlanData();
                
                showToast('已清除所有选择');
            });
            
            // 添加自定义书籍
            addCustomBookBtn.addEventListener('click', addCustomBook);
            
            customBookTitleInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    addCustomBook();
                }
            });
            
            // 保存计划按钮
            savePlanBtn.addEventListener('click', function() {
                // 验证至少选择了一本书
                const totalBooks = readingPlan.selectedBooks.length + readingPlan.customBooks.length;
                if (totalBooks === 0) {
                    showToast('请至少选择或添加一本书', 'warning');
                    return;
                }
                
                // 显示成功模态框
                successModal.classList.add('active');
                document.body.style.overflow = 'hidden';
                
                // 保存计划
                savePlanData();
                showToast('计划保存成功！');
            });
            
            // 截图按钮
            screenshotBtn.addEventListener('click', function() {
                // 使用html2canvas截图
                html2canvas(planCard, {
                    backgroundColor: null,
                    scale: 2, // 提高分辨率
                    useCORS: true
                }).then(canvas => {
                    // 将canvas转换为图片URL
                    const imageUrl = canvas.toDataURL('image/png');
                    
                    // 创建下载链接
                    const link = document.createElement('a');
                    link.href = imageUrl;
                    link.download = '2026阅读计划.png';
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                    showToast('计划卡片已保存为图片');
                }).catch(error => {
                    console.error('截图失败:', error);
                    showToast('截图失败，请重试', 'error');
                });
            });
            
            // 关闭成功模态框
            document.getElementById('closeSuccessModal').addEventListener('click', function() {
                successModal.classList.remove('active');
                document.body.style.overflow = 'auto';
            });
            
            // 点击模态框外部关闭
            successModal.addEventListener('click', function(e) {
                if (e.target === successModal) {
                    successModal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
            });
            
            // 分享计划按钮
            document.getElementById('sharePlanBtn').addEventListener('click', function() {
                // 在实际应用中，这里会连接到社交媒体API
                showToast('分享功能将在正式版本中开放');
            });
            
            // 创建新计划按钮
            document.getElementById('newPlanBtn').addEventListener('click', function() {
                // 重置计划
                readingPlan = {
                    name: "我的2026阅读计划",
                    goal: 12,
                    preference: "classic",
                    startMonth: "1",
                    selectedBooks: [],
                    customBooks: []
                };
                
                // 更新表单
                planNameInput.value = readingPlan.name;
                readingPreferenceSelect.value = readingPlan.preference;
                startMonthSelect.value = readingPlan.startMonth;
                
                // 更新目标选择
                goalOptions.forEach(option => {
                    option.classList.remove('selected');
                    if (parseInt(option.getAttribute('data-goal')) === readingPlan.goal) {
                        option.classList.add('selected');
                    }
                });
                
                // 重新渲染
                renderBookRecommendations();
                renderCustomBooks();
                updatePlanCard();
                
                // 关闭模态框
                successModal.classList.remove('active');
                document.body.style.overflow = 'auto';
                
                showToast('已创建新计划');
            });
        }
        
        // 添加自定义书籍
        function addCustomBook() {
            const title = customBookTitleInput.value.trim();
            if (!title) {
                showToast('请输入书名', 'warning');
                return;
            }
            
            // 简单解析作者（如果有的话）
            let bookTitle = title;
            let bookAuthor = null;
            
            // 尝试解析格式："书名 - 作者"
            const dashIndex = title.indexOf(' - ');
            if (dashIndex !== -1) {
                bookTitle = title.substring(0, dashIndex).trim();
                bookAuthor = title.substring(dashIndex + 3).trim();
            }
            
            // 添加书籍
            readingPlan.customBooks.push({
                title: bookTitle,
                author: bookAuthor
            });
            
            // 保存并更新
            savePlanData();
            renderCustomBooks();
            updatePlanCard();
            
            // 清空输入框
            customBookTitleInput.value = '';
            customBookTitleInput.focus();
            
            showToast(`《${bookTitle}》已添加到书单`);
        }
        
        // 显示提示消息
        function showToast(message, type = 'success') {
            // 创建toast元素
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                bottom: 30px;
                left: 50%;
                transform: translateX(-50%);
                background: ${type === 'success' ? 'rgba(42, 48, 72, 0.95)' : 'rgba(244, 67, 54, 0.95)'};
                backdrop-filter: blur(10px);
                color: #fff;
                padding: 15px 25px;
                border-radius: 50px;
                box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
                border: 1px solid rgba(255, 255, 255, 0.1);
                z-index: 3000;
                font-size: 0.9rem;
                animation: fadeInUp 0.3s ease;
                display: flex;
                align-items: center;
                gap: 10px;
            `;
            
            const icon = type === 'success' ? 'fa-check-circle' : 'fa-exclamation-triangle';
            const iconColor = type === 'success' ? '#4caf50' : '#ffc107';
            
            toast.innerHTML = `<i class="fas ${icon}" style="color: ${iconColor};"></i> ${message}`;
            document.body.appendChild(toast);
            
            // 3秒后移除
            setTimeout(() => {
                toast.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 300);
            }, 3000);
        }
        
        // 添加CSS动画
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeInUp {
                from { opacity: 0; transform: translate(-50%, 20px); }
                to { opacity: 1; transform: translate(-50%, 0); }
            }
            @keyframes fadeOut {
                from { opacity: 1; }
                to { opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>